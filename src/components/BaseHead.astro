---
// Import the global.css file here so that it is included on
// all pages through the use of the <BaseHead /> component.
import "../styles/global.css";
import { siteConfig } from "@/config/site";
import GoogleAnalytics from "@/components/GoogleAnalytics.astro";
import SEO from "@/components/SEO.astro";
import type { SEOProps } from "@/utils/seo";

interface Props {
  seo?: SEOProps;
  title?: string;
  description?: string;
}

// Backward compatibility: accept either seo object or individual props
const { seo, title = siteConfig.name, description = siteConfig.description } = Astro.props;

// Create a complete SEO object from either source
const seoData: SEOProps = seo || {
  title,
  description,
};
---

<!-- Global Metadata -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" type="image/svg+xml" href="/logo.svg" />
<link rel="sitemap" href="/sitemap-index.xml" />
<link rel="alternate" type="application/rss+xml" title={siteConfig.name} href={new URL("rss.xml", Astro.site)} />
<meta name="generator" content={Astro.generator} />

<!-- Font preloads -->
<link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin />
<link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin />

<!-- SEO & Social Tags -->
<SEO {...seoData} />

<GoogleAnalytics />
<script type="text/javascript">
  (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "rhra2zxbcg");
</script>
