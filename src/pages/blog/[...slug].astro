---
import { type CollectionEntry, getCollection } from "astro:content";
import BlogPost from "@/layouts/BlogPost.astro";
import { render } from "astro:content";
import type { RenderResult } from "astro:content";
export const prerender = true;

export async function getStaticPaths() {
  const posts = await getCollection("blog");

  return posts.map((post) => ({
    params: { slug: post.id },
    props: { post },
  }));
}

// This is what your component receives
const { post } = Astro.props;
let rendered: RenderResult;

if (post) {
  rendered = await render(post);
} else {
  console.error("Post not found");
}
---

<BlogPost {...post.data}>
  {rendered && <rendered.Content />}
</BlogPost>
